---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const milestones = [
	// Introduction
	{
		title: '0. Introduction: what we\'re building',
		description: 'A high-level overview of the project — what a transformer inference engine is and how this series is structured.',
		href: '/tutorials/introduction/',
		status: 'Available',
	},
	// Phase 1 — Tensor Core
	{
		title: '2. What is a tensor?',
		description: 'Multi-dimensional arrays as the foundation of every model computation — shapes, strides, and indexing.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '3. Tensor operations',
		description: 'Element-wise math, scalar operations, and the building blocks that power every layer.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '4. Memory layout matters',
		description: 'Row-major order, cache lines, and why contiguous access is ~100x faster than random access.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 2 — Linear Algebra
	{
		title: '5. Matrix multiplication',
		description: 'The single most important operation in deep learning — naive implementation and why it matters.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '6. Optimizing matmul',
		description: 'Loop reordering, cache blocking, and going from 0.5 to 5 GFLOPS on a single CPU core.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '7. Batched matrix multiplication',
		description: 'Extending matmul to handle batches — essential for multi-head attention.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 3 — Transformer Components
	{
		title: '8. Linear layers and GELU',
		description: 'The fundamental building block: output = input × weight + bias, plus the activation that replaced ReLU.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '9. Layer normalization',
		description: 'Stabilizing activations with mean/variance normalization and learned scale-shift parameters.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '10. Softmax and numerical stability',
		description: 'Turning raw logits into probability distributions without overflow or underflow.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '11. Self-attention from scratch',
		description: 'Queries, keys, values — the mechanism that lets tokens communicate with each other.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '12. Multi-head attention and causal masking',
		description: 'Parallel attention heads and the mask that prevents looking into the future.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '13. Feed-forward networks',
		description: 'The two-layer MLP where the model processes the information attention gathered.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '14. Transformer blocks and residual connections',
		description: 'Assembling attention + FFN with skip connections and pre-norm into a complete block.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 4 — Tokenization
	{
		title: '15. Tokenization',
		description: 'Converting text to numbers and back — character-level encoding and the path to BPE.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 5 — Model assembly
	{
		title: '16. Model weights and loading',
		description: 'Reading pretrained parameters from binary files and placing them into the right structures.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '17. Embeddings and the forward pass',
		description: 'Token and position embeddings, stacking transformer blocks, and producing logits end-to-end.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 6 — Inference
	{
		title: '18. Sampling strategies',
		description: 'Temperature, top-k, and nucleus sampling — controlling the randomness of generation.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '19. Autoregressive generation',
		description: 'The generation loop: predict one token, append it, repeat — building a working inference engine.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 7 — Optimization
	{
		title: '20. KV cache',
		description: 'The key optimization for inference — caching keys and values to avoid redundant computation.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	{
		title: '21. Profiling and performance',
		description: 'Finding bottlenecks, parallelizing with threads, and pre-allocating memory for speed.',
		href: '/tutorials',
		status: 'Coming soon',
	},
	// Phase 8 — Advanced
	{
		title: '22. Rotary positional embeddings',
		description: 'RoPE — encoding position directly into attention via rotation, as used in LLaMA and Mistral.',
		href: '/tutorials',
		status: 'Coming soon',
	},
];
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			.hero {
				padding: 5rem 0 3.5rem;
				max-width: 820px;
				position: relative;
			}
			.hero::before {
				content: '';
				position: absolute;
				top: -20px;
				left: -40px;
				width: 120px;
				height: 120px;
				background: radial-gradient(circle, rgba(210, 123, 123, 0.15), transparent 70%);
				border-radius: 50%;
				filter: blur(30px);
				z-index: -1;
			}
			.hero-badge {
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
				padding: 0.5rem 1rem;
				margin-bottom: 1.5rem;
				border-radius: 50px;
				background: rgba(var(--surface), 0.8);
				border: 1px solid rgba(var(--accent-rgb), 0.3);
				font-size: 0.85rem;
				font-weight: 600;
				color: var(--accent);
				letter-spacing: 0.02em;
			}
			.hero-badge-dot {
				width: 6px;
				height: 6px;
				background: var(--accent);
				border-radius: 50%;
				animation: badge-pulse 2s ease-in-out infinite;
			}
			@keyframes badge-pulse {
				0%, 100% { opacity: 1; transform: scale(1); }
				50% { opacity: 0.6; transform: scale(0.9); }
			}
			.hero h1 {
				font-size: clamp(2.5rem, 6vw, 3.8rem);
				margin-bottom: 1.2rem;
				line-height: 1.1;
				font-weight: 800;
				letter-spacing: -0.04em;
				background: linear-gradient(135deg, rgb(var(--black)) 0%, rgba(var(--black), 0.88) 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				position: relative;
			}
			.hero h1::after {
				content: '';
				position: absolute;
				bottom: -8px;
				left: 0;
				width: 80px;
				height: 4px;
				background: linear-gradient(90deg, var(--accent), transparent);
				border-radius: 2px;
			}
			.hero p {
				font-size: 1.15rem;
				max-width: 62ch;
				margin-bottom: 2rem;
				color: rgba(var(--gray-dark), 0.75);
				line-height: 1.7;
				font-weight: 400;
			}
			.cta {
				display: flex;
				flex-wrap: wrap;
				gap: 1rem;
				align-items: center;
			}
			.cta a {
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
				padding: 0.9rem 1.8rem;
				border-radius: 12px;
				font-weight: 600;
				text-decoration: none;
				font-size: 1rem;
				transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
				position: relative;
				overflow: hidden;
			}
			.cta .primary {
				background: linear-gradient(135deg, #d27b7b 0%, var(--accent-dark) 100%);
				color: #fff;
				box-shadow: 0 4px 14px rgba(210, 123, 123, 0.35), 0 2px 4px rgba(0, 0, 0, 0.2);
			}
			.cta .primary::before {
				content: '';
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
				transition: left 0.5s;
			}
			.cta .primary:hover::before {
				left: 100%;
			}
			.cta .primary:hover {
				box-shadow: 0 6px 20px rgba(210, 123, 123, 0.45), 0 3px 6px rgba(0, 0, 0, 0.25);
				transform: translateY(-2px);
			}
			.cta .secondary {
				border: 1px solid rgba(var(--border), 0.9);
				color: rgb(var(--gray-dark));
				background: rgba(var(--surface-soft), 0.42);
			}
			.cta .secondary:hover {
				color: rgb(var(--black));
				background: rgba(var(--surface-soft), 0.6);
				border-color: rgba(var(--accent-rgb), 0.4);
				transform: translateY(-1px);
			}
			.roadmap {
				margin-top: 5rem;
				max-width: 980px;
				padding-top: 3rem;
				border-top: 1px solid rgba(var(--border), 0.3);
			}
			.roadmap h2 {
				margin-bottom: 0.5rem;
				font-size: clamp(1.8rem, 3vw, 2.2rem);
				font-weight: 750;
				letter-spacing: -0.03em;
			}
			.roadmap > p {
				color: rgba(var(--gray-dark), 0.65);
				margin-bottom: 2.5rem;
				font-size: 1.05rem;
				max-width: 60ch;
			}
			/* --- Responsive hero adjustments --- */
			@media (max-width: 720px) {
				.hero {
					padding: 3rem 0 2rem;
				}
				.hero::before {
					display: none;
				}
				.hero-badge {
					font-size: 0.8rem;
					padding: 0.4rem 0.8rem;
				}
				.hero h1 {
					margin-bottom: 1rem;
				}
				.hero h1::after {
					width: 60px;
					height: 3px;
				}
				.hero p {
					font-size: 1.05rem;
					margin-bottom: 1.5rem;
				}
				.cta a {
					padding: 0.8rem 1.5rem;
					font-size: 0.95rem;
				}
				.roadmap {
					margin-top: 3.5rem;
					padding-top: 2rem;
				}
			}
			/* --- Timeline container --- */
			.timeline-shell {
				position: relative;
			}
			.timeline-path {
				position: absolute;
				top: 0;
				left: 0;
				pointer-events: none;
				overflow: visible;
				z-index: 0;
			}
			.construction-icons {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 0;
				opacity: 0.16;
			}
			.construction-icon {
				position: absolute;
				width: 48px;
				height: 48px;
				fill: none;
				stroke: rgba(var(--gray), 0.7);
			}
			.timeline-path :global(.seg) {
				fill: none;
				stroke: rgba(var(--accent-rgb), 0.55);
				stroke-width: 2;
				stroke-linecap: round;
				stroke-linejoin: round;
				filter: drop-shadow(0 0 3px rgba(var(--accent-rgb), 0.2));
				transition: stroke 0.3s ease, stroke-width 0.3s ease, filter 0.3s ease;
			}
			.timeline-path :global(.seg.muted) {
				stroke: rgba(var(--gray), 0.3);
				stroke-dasharray: 3 4;
				filter: drop-shadow(0 0 2px rgba(var(--gray), 0.1));
			}
			.timeline-path :global(.seg.pulse) {
				stroke: #ff9b9b;
				stroke-width: 3;
				filter: drop-shadow(0 0 8px rgba(var(--accent-rgb), 0.7));
				animation: seg-pulse 1s ease-in-out infinite;
			}
			@keyframes seg-pulse {
				0%, 100% { filter: drop-shadow(0 0 4px rgba(var(--accent-rgb), 0.5)); }
				50% { filter: drop-shadow(0 0 14px rgba(var(--accent-rgb), 0.9)); }
			}
			.timeline {
				position: relative;
				list-style: none;
				margin: 1rem 0 0;
				padding: 0;
				z-index: 1;
			}
			/* --- Items --- */
			.timeline-item {
				position: relative;
				padding: 0 0 1.25rem 0;
				box-sizing: border-box;
				z-index: 2;
			}
			/* --- Cards --- */
			.timeline-link,
			.timeline-card {
				display: block;
				text-decoration: none;
				padding: 1rem 1.1rem;
				border-radius: 12px;
				background: rgb(var(--surface));
				border: 1px solid rgba(var(--border), 0.75);
				box-shadow: 0 8px 18px rgba(0, 0, 0, 0.15);
				transition: border-color 0.2s ease, transform 0.2s ease, background 0.2s ease;
			}
			.timeline-link:hover {
				transform: translateY(-2px);
				border-color: #ff9b9b;
				background: rgb(var(--surface));
				box-shadow: 0 10px 22px rgba(0, 0, 0, 0.22), 0 0 0 2px rgba(var(--accent-rgb), 0.92);
				animation: card-pulse 1s ease-in-out infinite;
			}
			.timeline-card.coming-soon {
				border: 1.5px dashed rgba(var(--border), 0.5);
				background: rgb(var(--surface));
				opacity: 0.75;
				cursor: default;
			}
			@keyframes card-pulse {
				0%, 100% { box-shadow: 0 10px 22px rgba(0, 0, 0, 0.22), 0 0 0 2px rgba(var(--accent-rgb), 0.7); }
				50% { box-shadow: 0 10px 22px rgba(0, 0, 0, 0.22), 0 0 0 2.5px rgba(var(--accent-rgb), 1), 0 0 16px rgba(var(--accent-rgb), 0.5); }
			}
			.timeline-head {
				display: flex;
				align-items: center;
				justify-content: space-between;
				gap: 0.6rem;
			}
			.timeline-title {
				margin: 0;
				font-size: 1.05rem;
				line-height: 1.3;
				color: rgb(var(--black));
				font-weight: 650;
			}
			.status {
				font-size: 0.75rem;
				line-height: 1;
				padding: 0.3rem 0.5rem;
				border-radius: 999px;
				border: 1px solid rgba(var(--border), 0.8);
				color: rgba(var(--gray), 0.85);
				white-space: nowrap;
				font-weight: 500;
			}
			.status.live {
				border-color: rgba(var(--accent-rgb), 0.75);
				color: rgb(var(--black));
				font-weight: 550;
			}
			.timeline-description {
				margin: 0.45rem 0 0;
				color: rgba(var(--gray-dark), 0.8);
				font-size: 0.95rem;
				line-height: 1.5;
			}
			/* --- Mobile --- */
			@media (max-width: 720px) {
				.timeline-item {
					padding-left: 0;
				}
			}
			/* --- Desktop zigzag --- */
			@media (min-width: 900px) {
				.timeline-item {
					width: calc(50% - 1.5rem);
					padding: 0 0 1.25rem;
				}
				.timeline-item:nth-child(odd) {
					margin-right: auto;
					padding-right: 1rem;
				}
				.timeline-item:nth-child(even) {
					margin-left: auto;
					padding-left: 1rem;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<section class="hero">
				<div class="hero-badge">
					<span class="hero-badge-dot"></span>
					Open Source Learning Path
				</div>
				<h1>Master transformer architecture by building your own GPT</h1>
				<p>
					A hands-on, beginner-friendly guide to understanding modern AI systems from first principles. Build a working language model while learning the fundamentals that power ChatGPT and Claude.
				</p>
				<div class="cta">
					<a class="primary" href="/tutorials">
						Start building
						<svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="opacity: 0.9;" aria-hidden="true">
							<path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</a>
					<a class="secondary" href="#roadmap">
						View learning path
						<svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="opacity: 0.7;" aria-hidden="true">
							<path d="M8 3L8 13M8 13L4 9M8 13L12 9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</a>
				</div>
			</section>

			<section id="roadmap" class="roadmap" aria-label="Roadmap overview">
			<h2>Learning path</h2>
			<p>22 bite-sized tutorials taking you from tensors to a working transformer inference engine.</p>
				<div class="timeline-shell">
					<svg class="timeline-path" aria-hidden="true">
					</svg>
					<div class="construction-icons" aria-hidden="true">
						<!-- Top section - sparse -->
						<!-- Diagonal construction lines -->
						<svg class="construction-icon" style="top: 25%; right: 10%; width: 55px; height: 55px; transform: rotate(-8deg);" viewBox="0 0 60 60" fill="none" stroke-width="1">
							<line x1="0" y1="20" x2="40" y2="20" stroke-dasharray="4 3"/>
							<line x1="0" y1="30" x2="40" y2="30" stroke-dasharray="4 3"/>
							<line x1="10" y1="10" x2="10" y2="40" stroke-dasharray="4 3"/>
						</svg>
						<!-- Small grid top -->
						<svg class="construction-icon" style="top: 18%; left: 12%; width: 35px; height: 35px; transform: rotate(12deg);" viewBox="0 0 40 40" fill="none" stroke-width="0.8">
							<rect x="5" y="5" width="10" height="10" />
							<rect x="15" y="5" width="10" height="10" />
							<rect x="5" y="15" width="10" height="10" />
							<rect x="15" y="15" width="10" height="10" />
						</svg>
						
						<!-- Middle section - moderate density -->
						<!-- Angled lines left -->
						<svg class="construction-icon" style="top: 35%; left: 5%; width: 45px; height: 45px; transform: rotate(18deg);" viewBox="0 0 50 50" fill="none" stroke-width="1">
							<line x1="10" y1="0" x2="10" y2="35" stroke-dasharray="5 4"/>
							<line x1="20" y1="0" x2="20" y2="35" stroke-dasharray="5 4"/>
							<line x1="30" y1="0" x2="30" y2="35" stroke-dasharray="5 4"/>
						</svg>
						<!-- Measurement marks -->
						<svg class="construction-icon" style="top: 40%; right: 12%; width: 60px; height: 30px; transform: rotate(-22deg);" viewBox="0 0 60 20" fill="none" stroke-width="1">
							<line x1="0" y1="10" x2="45" y2="10" />
							<line x1="5" y1="7" x2="5" y2="13" />
							<line x1="15" y1="7" x2="15" y2="13" />
							<line x1="25" y1="7" x2="25" y2="13" />
							<line x1="35" y1="7" x2="35" y2="13" />
						</svg>
						<!-- Corner brackets -->
						<svg class="construction-icon" style="top: 48%; left: 8%; width: 38px; height: 38px; transform: rotate(5deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.5">
							<path d="M8 12L8 8L12 8M32 8L28 8L28 12M8 28L8 32L12 32M32 32L28 32L28 28"/>
						</svg>
						
						<!-- Lower section - dense -->
						<!-- Corner L-shapes -->
						<svg class="construction-icon" style="top: 58%; right: 14%; width: 50px; height: 50px; transform: rotate(-17deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.2">
							<path d="M10 10L10 25L25 25M30 15L30 30L15 30"/>
						</svg>
						<!-- Grid pattern -->
						<svg class="construction-icon" style="top: 65%; right: 7%; width: 42px; height: 42px; transform: rotate(14deg);" viewBox="0 0 50 50" fill="none" stroke-width="0.8">
							<line x1="0" y1="10" x2="30" y2="10" />
							<line x1="0" y1="20" x2="30" y2="20" />
							<line x1="0" y1="30" x2="30" y2="30" />
							<line x1="10" y1="0" x2="10" y2="30" />
							<line x1="20" y1="0" x2="20" y2="30" />
						</svg>
						<!-- Crosshairs -->
						<svg class="construction-icon" style="top: 72%; left: 9%; width: 52px; height: 52px; transform: rotate(-24deg);" viewBox="0 0 40 40" fill="none" stroke-width="1">
							<line x1="20" y1="5" x2="20" y2="15" />
							<line x1="20" y1="25" x2="20" y2="35" />
							<line x1="5" y1="20" x2="15" y2="20" />
							<line x1="25" y1="20" x2="35" y2="20" />
							<circle cx="20" cy="20" r="8"/>
						</svg>
						<!-- Additional dense icons at bottom -->
						<svg class="construction-icon" style="top: 68%; right: 15%; width: 40px; height: 40px; transform: rotate(27deg);" viewBox="0 0 50 50" fill="none" stroke-width="1">
							<line x1="10" y1="0" x2="10" y2="30" stroke-dasharray="3 3"/>
							<line x1="20" y1="0" x2="20" y2="30" stroke-dasharray="3 3"/>
						</svg>
						<svg class="construction-icon" style="top: 75%; left: 6%; width: 46px; height: 46px; transform: rotate(-11deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.2">
							<path d="M5 10L15 10M5 20L15 20M5 30L15 30M25 10L35 10M25 20L35 20"/>
						</svg>
						<svg class="construction-icon" style="top: 78%; right: 9%; width: 38px; height: 38px; transform: rotate(-32deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.5">
							<path d="M10 5L10 15M20 5L20 15M30 5L30 15M10 25L10 35M20 25L20 35"/>
						</svg>
						<svg class="construction-icon" style="top: 82%; left: 11%; width: 44px; height: 44px; transform: rotate(19deg);" viewBox="0 0 50 50" fill="none" stroke-width="0.9">
							<rect x="5" y="5" width="12" height="12" />
							<rect x="20" y="5" width="12" height="12" />
							<rect x="5" y="20" width="12" height="12" />
						</svg>
						<svg class="construction-icon" style="top: 85%; right: 11%; width: 50px; height: 50px; transform: rotate(8deg);" viewBox="0 0 60 60" fill="none" stroke-width="1">
							<line x1="0" y1="15" x2="35" y2="15" stroke-dasharray="5 4"/>
							<line x1="0" y1="25" x2="35" y2="25" stroke-dasharray="5 4"/>
							<line x1="0" y1="35" x2="35" y2="35" stroke-dasharray="5 4"/>
						</svg>
						<svg class="construction-icon" style="top: 88%; left: 8%; width: 42px; height: 42px; transform: rotate(-26deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.3">
							<path d="M7 7L7 18L18 18M33 22L33 33L22 33"/>
						</svg>
						<svg class="construction-icon" style="top: 91%; right: 13%; width: 48px; height: 48px; transform: rotate(16deg);" viewBox="0 0 50 50" fill="none" stroke-width="1">
							<circle cx="25" cy="25" r="10"/>
							<line x1="25" y1="10" x2="25" y2="15" />
							<line x1="25" y1="35" x2="25" y2="40" />
							<line x1="10" y1="25" x2="15" y2="25" />
							<line x1="35" y1="25" x2="40" y2="25" />
						</svg>
						<svg class="construction-icon" style="top: 94%; left: 10%; width: 36px; height: 36px; transform: rotate(23deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.1">
							<line x1="5" y1="5" x2="25" y2="5" stroke-dasharray="4 3"/>
							<line x1="5" y1="15" x2="25" y2="15" stroke-dasharray="4 3"/>
							<line x1="5" y1="25" x2="25" y2="25" stroke-dasharray="4 3"/>
						</svg>
						<!-- Extra bottom icons -->
						<svg class="construction-icon" style="top: 77%; left: 14%; width: 40px; height: 40px; transform: rotate(-15deg);" viewBox="0 0 40 40" fill="none" stroke-width="1">
							<path d="M5 8L5 4L9 4M31 4L27 4L27 8M5 32L5 36L9 36M31 36L27 36L27 32"/>
						</svg>
						<svg class="construction-icon" style="top: 80%; right: 6%; width: 44px; height: 44px; transform: rotate(21deg);" viewBox="0 0 50 50" fill="none" stroke-width="0.9">
							<line x1="10" y1="10" x2="30" y2="10" stroke-dasharray="3 3"/>
							<line x1="10" y1="20" x2="30" y2="20" stroke-dasharray="3 3"/>
							<line x1="15" y1="5" x2="15" y2="25" stroke-dasharray="3 3"/>
							<line x1="25" y1="5" x2="25" y2="25" stroke-dasharray="3 3"/>
						</svg>
						<svg class="construction-icon" style="top: 84%; left: 7%; width: 38px; height: 38px; transform: rotate(-9deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.2">
							<line x1="8" y1="8" x2="18" y2="8"/>
							<line x1="8" y1="16" x2="18" y2="16"/>
							<line x1="22" y1="8" x2="32" y2="8"/>
							<line x1="22" y1="16" x2="32" y2="16"/>
							<line x1="8" y1="24" x2="18" y2="24"/>
							<line x1="22" y1="24" x2="32" y2="24"/>
						</svg>
						<svg class="construction-icon" style="top: 87%; right: 14%; width: 41px; height: 41px; transform: rotate(28deg);" viewBox="0 0 40 40" fill="none" stroke-width="1">
							<rect x="5" y="5" width="10" height="10" />
							<rect x="17" y="5" width="10" height="10" />
							<rect x="5" y="17" width="10" height="10" />
						</svg>
						<svg class="construction-icon" style="top: 90%; left: 13%; width: 47px; height: 47px; transform: rotate(-19deg);" viewBox="0 0 50 50" fill="none" stroke-width="1.1">
							<line x1="10" y1="5" x2="10" y2="30" stroke-dasharray="4 4"/>
							<line x1="20" y1="5" x2="20" y2="30" stroke-dasharray="4 4"/>
							<line x1="30" y1="5" x2="30" y2="30" stroke-dasharray="4 4"/>
						</svg>
						<svg class="construction-icon" style="top: 93%; right: 8%; width: 43px; height: 43px; transform: rotate(13deg);" viewBox="0 0 40 40" fill="none" stroke-width="1.3">
							<path d="M8 8L8 22L22 22M32 18L32 32L18 32"/>
						</svg>
						<svg class="construction-icon" style="top: 96%; left: 9%; width: 39px; height: 39px; transform: rotate(-24deg);" viewBox="0 0 40 40" fill="none" stroke-width="1">
							<circle cx="20" cy="20" r="8"/>
							<line x1="20" y1="8" x2="20" y2="12" />
							<line x1="20" y1="28" x2="20" y2="32" />
							<line x1="8" y1="20" x2="12" y2="20" />
							<line x1="28" y1="20" x2="32" y2="20" />
						</svg>
						<svg class="construction-icon" style="top: 96%; right: 12%; width: 45px; height: 45px; transform: rotate(17deg);" viewBox="0 0 50 50" fill="none" stroke-width="0.95">
							<line x1="5" y1="10" x2="30" y2="10" />
							<line x1="5" y1="20" x2="30" y2="20" />
							<line x1="5" y1="30" x2="30" y2="30" />
							<line x1="15" y1="5" x2="15" y2="35" />
						</svg>
					</div>
					<ol class="timeline">
						{milestones.map((milestone) => (
							<li class:list={["timeline-item", { live: milestone.status === 'Available' }]} data-status={milestone.status}>
								{milestone.status === 'Available' ? (
									<a class="timeline-link" href={milestone.href}>
										<div class="timeline-head">
											<h3 class="timeline-title">{milestone.title}</h3>
											<span class:list={["status", { live: milestone.status === 'Available' }]}>
												{milestone.status}
											</span>
										</div>
										<p class="timeline-description">{milestone.description}</p>
									</a>
								) : (
									<div class="timeline-card coming-soon">
										<div class="timeline-head">
											<h3 class="timeline-title">{milestone.title}</h3>
											<span class:list={["status", { live: milestone.status === 'Available' }]}>
												{milestone.status}
											</span>
										</div>
										<p class="timeline-description">{milestone.description}</p>
									</div>
								)}
							</li>
						))}
					</ol>
				</div>
			</section>
		</main>
		<Footer />
	<script>
		const svgNS = 'http://www.w3.org/2000/svg';

		function drawStaircase() {
			const shell = document.querySelector('.timeline-shell');
			const svg = document.querySelector('.timeline-path') as SVGSVGElement | null;
			if (!shell || !svg) return;

			const items = Array.from(document.querySelectorAll('.timeline-item'));
			const cards = Array.from(document.querySelectorAll('.timeline-link, .timeline-card'));
			if (cards.length < 2) return;

			// Clear old segments
			svg.querySelectorAll('.seg').forEach((el) => el.remove());

			const shellRect = shell.getBoundingClientRect();
			const isDesktop = window.matchMedia('(min-width: 900px)').matches;

			const w = shellRect.width;
			const h = shellRect.height;
			svg.setAttribute('width', String(w));
			svg.setAttribute('height', String(h));
			svg.setAttribute('viewBox', `0 0 ${w} ${h}`);

			if (!isDesktop) {
				const pts = cards.map((c) => {
					const r = c.getBoundingClientRect();
					return { x: r.left - shellRect.left - 6, y: r.top + r.height / 2 - shellRect.top };
				});
				for (let i = 0; i < pts.length - 1; i++) {
				const fromStatus = items[i]?.getAttribute('data-status');
				const toStatus = items[i + 1]?.getAttribute('data-status');
				const isMuted = fromStatus === 'Coming soon' && toStatus === 'Coming soon';

				const line = document.createElementNS(svgNS, 'line');
				line.setAttribute('x1', String(pts[i].x));
				line.setAttribute('y1', String(pts[i].y));
				line.setAttribute('x2', String(pts[i + 1].x));
				line.setAttribute('y2', String(pts[i + 1].y));
				line.classList.add('seg');
				if (isMuted) line.classList.add('muted');
					line.dataset.from = String(i);
					line.dataset.to = String(i + 1);
					svg.appendChild(line);
				}
				return;
			}

			// Desktop: staircase with individual segments per connection
			const anchors = cards.map((c) => {
				const r = c.getBoundingClientRect();
				return {
					x: r.left + r.width / 2 - shellRect.left,
					y: r.top + r.height / 2 - shellRect.top,
				};
			});

			for (let i = 0; i < anchors.length - 1; i++) {
				const prev = anchors[i];
				const curr = anchors[i + 1];
				const corner = { x: curr.x, y: prev.y };

				// Check status of both items
				const fromStatus = items[i]?.getAttribute('data-status');
				const toStatus = items[i + 1]?.getAttribute('data-status');
				const isMuted = fromStatus === 'Coming soon' && toStatus === 'Coming soon';

				// Horizontal segment
				const hLine = document.createElementNS(svgNS, 'line');
				hLine.setAttribute('x1', String(prev.x));
				hLine.setAttribute('y1', String(prev.y));
				hLine.setAttribute('x2', String(corner.x));
				hLine.setAttribute('y2', String(corner.y));
				hLine.classList.add('seg');
				if (isMuted) hLine.classList.add('muted');
				hLine.dataset.from = String(i);
				hLine.dataset.to = String(i + 1);
				svg.appendChild(hLine);

				// Vertical segment
				const vLine = document.createElementNS(svgNS, 'line');
				vLine.setAttribute('x1', String(corner.x));
				vLine.setAttribute('y1', String(corner.y));
				vLine.setAttribute('x2', String(curr.x));
				vLine.setAttribute('y2', String(curr.y));
				vLine.classList.add('seg');
				if (isMuted) vLine.classList.add('muted');
				vLine.dataset.from = String(i);
				vLine.dataset.to = String(i + 1);
				svg.appendChild(vLine);
			}
		}

		// Hover: pulse the card border AND the connected line segments (only for available cards)
		function setupHover() {
			const cards = Array.from(document.querySelectorAll('.timeline-link'));
			const items = Array.from(document.querySelectorAll('.timeline-item'));
			cards.forEach((card) => {
				const idx = items.indexOf(card.closest('.timeline-item'));
				card.addEventListener('mouseenter', () => {
					document.querySelectorAll('.timeline-path .seg').forEach((seg) => {
						const el = seg as HTMLElement;
						if (el.dataset.from === String(idx) || el.dataset.to === String(idx)) {
							el.classList.add('pulse');
						}
					});
				});
				card.addEventListener('mouseleave', () => {
					document.querySelectorAll('.timeline-path .seg.pulse').forEach((seg) => {
						seg.classList.remove('pulse');
					});
				});
			});
		}

		requestAnimationFrame(() => {
			drawStaircase();
			setupHover();
			setTimeout(() => { drawStaircase(); setupHover(); }, 250);
		});

		window.addEventListener('resize', () => { drawStaircase(); setupHover(); });

		const shell = document.querySelector('.timeline-shell');
		if (shell) {
			new ResizeObserver(() => { drawStaircase(); setupHover(); }).observe(shell);
		}
	</script>
	</body>
</html>
